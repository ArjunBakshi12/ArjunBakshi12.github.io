function XMLtoJSON(){var e=this;e.fromFile=function(e,n){var i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");i.open("GET",e,!1),i.send(void 0);var a=t(r(i.responseXML));return"undefined"==typeof n?JSON.parse(a):a},e.fromStr=function(e,n){if(window.DOMParser)var i=new DOMParser,a=i.parseFromString(e,"text/xml");else a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false";var o=t(r(a));return"undefined"==typeof n?JSON.parse(o):o};var r=function(e){var t={};if(1===e.nodeType){if(e.attributes.length>0){t["@attributes"]={};for(var n=0;n<e.attributes.length;n++){var i=e.attributes.item(n);t["@attributes"][i.nodeName]=i.value}}}else 3===e.nodeType&&(t=e.nodeValue);if(e.hasChildNodes())for(var a=0;a<e.childNodes.length;a++){var o=e.childNodes.item(a),s=o.nodeName;if("undefined"==typeof t[s])t[s]=r(o);else{if("undefined"==typeof t[s].push){var f=t[s];t[s]=[],t[s].push(f)}t[s].push(r(o))}}return t},t=function(e){var r=JSON.stringify(e,void 0,2),t=r.replace(/(\\t|\\r|\\n)/g,""),n=t.replace(/"",[\n\t\r\s]+""[,]*/g,""),i=n.replace(/(\n[\t\s\r]*\n)/g,""),a=i.replace(/\[[\t\s]*\]/g,'""');return a.indexOf('"parsererror": {')===-1?a:"Invalid XML format"}}var xml2json=new XMLtoJSON;